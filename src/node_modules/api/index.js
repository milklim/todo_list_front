
const axios = require('axios')
const baseUrl = 'http://localhost:3000/'

export const fetchLists = async () => {
    const response = await axios.get(baseUrl + 'v1/lists')
    return response.data
}

export const fetchListTasks = async (listId) => {
    const response = await axios.get(baseUrl + 'v1/list_tasks/' + listId)
    return response.data
}

export const createList = async (name) => {
    const response = await axios.post(baseUrl + 'v1/lists/', {list:{label: name}})
    return response.data
}

export const updateList = async (list) => {
    const response = await axios.patch(baseUrl + 'v1/lists/' + list.id, list)
    return response.data
}

export const deleteList = async (listId) => {
    const response = await axios.delete(baseUrl + 'v1/lists/' + listId)
    return response.data
}

export const createTask = async (content, listId) => {
    const response = await axios.post(baseUrl + 'v1/tasks/', {task:{content: content, list_id: listId}})
    return response.data
}

export  const updateTask = async (task) => {
    const response = await axios.patch(baseUrl + 'v1/tasks/' + task.id, task)
    return response.data
}

export const deleteTask = async (taskId) => {
    const response = await axios.delete(baseUrl + 'v1/tasks/' + taskId)
    return response.data
}

export const toggleDoneStatus = async (taskId) => {
    const response = await axios.patch(baseUrl + 'v1/tasks/' + taskId + '/check')
    return response.data
}

export const taskPositionUp = async (taskId) => {
    const response = await axios.patch(baseUrl + 'v1/tasks/' + taskId + '/up')
    return response.data
}

export const taskPositionDown = async (taskId) => {
    const response = await axios.patch(baseUrl + 'v1/tasks/' + taskId + '/down')
    return response.data
}


export const signUpApi = async(email, pass, passConf) => {
    const headers = {
        'email': email,
        'password': pass,
        'password_confirmation': passConf,
        'confirm_success_url': '/'
    }
    const response = await axios.post(baseUrl + 'auth', {
            'email': email,
            'password': pass,
            'password_confirmation': passConf,
            'confirm_success_url': '/'
        })
    return response.headers
}