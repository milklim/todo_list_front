import React, {Component} from 'react'
import {connect} from 'react-redux'

import {
    fetchListTasks
} from 'actions'

import {
    getTasksOfList
} from "selectors";


class TasksOfList extends Component {
    componentDidMount () {
            this.props.fetchListTasks(this.props.listId) //param
    }

    renderTask(task){
        return(
            <div className="w3-row w3-border-left w3-border-right w3-border-bottom task-item" key={task.id}>
                <div className="w3-display-container w3-col w3-border-right done-checkbox" >
                    <input className="w3-check w3-display-middle" type="checkbox"/>
                </div>
                <div className="w3-col w3-padding-16 w3-right task-edit-btns">
                    <div className="w3-wide">
                        <div className="arrow-up"></div>
                        <div className="arrow-down"></div>
                        <i className="fa">|</i>
                        <i className="fa fa-pencil"> |</i>
                        <i className="fa fa-trash-o"></i>
                    </div>
                </div>
                <div className="w3-rest w3-padding-16 w3-border-left w3-border-right task-content">
                    <span>{task.content}</span>
                </div>
            </div>
        )
    }

    render() {
        const {tasks} = this.props

        return (
            <div>
                {tasks.map((task) => this.renderTask(task))}
            </div>
        )
    }
}


const mapStateToProps = (state, ownProps) => {
    return {
        tasks: getTasksOfList(state, ownProps.listId)
    }
}

const mapDispatchToProps = {
    fetchListTasks
}

export default connect(mapStateToProps, mapDispatchToProps)(TasksOfList)